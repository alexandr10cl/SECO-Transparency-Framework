{% extends "base.html" %}

{% block head %}
<link rel="stylesheet" href="/static/css/sign_in.css">
{% endblock %}

{% block title %}Sign In{% endblock %}

{% block content %}
<div class="signin">
    <form class="signinForm" action="{{ url_for('reset_password', id=id) }}" method="post">
        <h2>Reset Password</h2>
        <input type="password" name="password" id="password" placeholder="Type your new password">
        <input type="password" name="confirm_password" id="confirm_password" placeholder="Confirm your new password">
        <input type="text" name="code" id="code" placeholder="Enter your reset code">
        <button class="btn btn-submit">Reset password</button>
        {% if message != '' %}
        <p class="msg">{{ message }}</p>
        {% endif %}
    </form>
</div>
{% endblock %}

{% block scripts %}

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const passwordInput = document.getElementById('password');
            const confirmPasswordInput = document.getElementById('confirm_password');

            confirmPasswordInput.addEventListener('input', () => {
                if (passwordInput.value !== confirmPasswordInput.value) {
                    confirmPasswordInput.setCustomValidity("Passwords do not match");
                } else {
                    confirmPasswordInput.setCustomValidity("");
                }
            });
        });
    </script>

{% endblock %}