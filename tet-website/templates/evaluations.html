{% extends "base.html" %}

{% block head %}
<link rel="stylesheet" href="/static/css/eval.css">
{% endblock %}

{% block title %}Evaluations{% endblock %}

{% block content %}
<div class="eval-page">
    <!-- Page Header with Breadcrumbs -->
    <div class="page-header">
        <div class="page-header-content">
            <nav class="breadcrumbs">
                <a href="{{ url_for('index') }}" class="breadcrumb-link">Home</a>
                <span class="breadcrumb-separator">â€º</span>
                <span class="breadcrumb-current">Evaluations</span>
            </nav>
            <h1 class="page-title">Evaluations</h1>
            <p class="page-subtitle">An easy way to evaluate the transparency of your portal</p>
        </div>
    </div>

    <div class="eval-container">
        <!-- Action Header -->
        <header class="eval-header">
            <div class="eval-title-section">
                <div class="eval-actions">
                    <a href="{{ url_for('create_evaluation') }}" class="dashboard-btn">
                        <span class="btn-icon">+</span>
                        <span>Create Evaluation</span>
                    </a>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="eval-main">
            <section class="evaluations-section">
                <h2 class="section-title">Your Evaluations</h2>
                
                <div class="evaluations-grid">
                    {% if evaluations %}
                        {% for e in evaluations %}
                        <div class="evaluation-card">
                            <div class="card-header">
                                <div class="card-title-section">
                                    <h3 class="card-title">{{ e.name }}</h3>
                                    <div class="evaluation-code">{{ e.evaluation_id }}</div>
                                </div>
                                <a href="{{ url_for('eval_dashboard', id=e.evaluation_id) }}" class="dashboard-link" title="View Dashboard">
                                    <span class="dashboard-icon">ðŸ“Š</span>
                                </a>
                            </div>
                            
                            <div class="card-content">
                                <div class="info-item">
                                    <label class="info-label">Portal</label>
                                    <div class="info-value">
                                        <span class="portal-name">{{ e.seco_portal }}</span>
                                        <span class="portal-url">{{ e.seco_portal_url }}</span>
                                    </div>
                                </div>

                                <div class="info-item">
                                    <label class="info-label">SECO Type</label>
                                    <div class="info-value">
                                        <span class="seco-type">{{ e.seco_type.name.replace('_', ' ').title() if e.seco_type else 'Not defined' }}</span>
                                    </div>
                                </div>

                                <div class="info-item">
                                    <label class="info-label">Related Processes</label>
                                    <div class="processes-list">
                                        {% for p in e.seco_processes %}
                                        <div class="process-badge">P{{ p.seco_process_id }} - {{ p.description }}</div>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card-footer">
                                <a href="{{ url_for('evaluation', id=e.evaluation_id) }}" class="details-link">
                                    <span>View Details</span>
                                    <span class="arrow-icon">â†’</span>
                                </a>
                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <div class="empty-state">
                            <p>You don't have any evaluations. Create one now!</p>
                            <a href="{{ url_for('create_evaluation') }}" class="dashboard-btn">
                                <span class="btn-icon">+</span>
                                <span>Create Evaluation</span>
                            </a>
                        </div>
                    {% endif %}
                </div>
            </section>
        </main>
    </div>
</div>
{% endblock %}